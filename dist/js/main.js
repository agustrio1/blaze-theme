import{n as i,s as _}from"./equality-PyWOQZUv.js";const d=[];function g(a,l=i){let r=null;const e=new Set;function t(n){if(_(a,n)&&(a=n,r)){const c=!d.length;for(const s of e)s[1](),d.push(s,a);if(c){for(let s=0;s<d.length;s+=2)d[s][0](d[s+1]);d.length=0}}}function o(n){t(n(a))}function m(n,c=i){const s=[n,c];return e.add(s),e.size===1&&(r=l(t,o)||i),n(a),()=>{e.delete(s),e.size===0&&r&&(r(),r=null)}}return{set:t,update:o,subscribe:m}}function p(){const{subscribe:a,set:l,update:r}=g({mode:"light",primaryColor:"#DC2626",fontFamily:"system-ui",fontSize:16,borderRadius:8,preferences:{}});return{subscribe:a,setMode:e=>{r(t=>{const o={...t,mode:e};return localStorage.setItem("blaze_theme_mode",e),document.documentElement.classList.toggle("dark",e==="dark"),o})},toggleMode:()=>{r(e=>{const t=e.mode==="light"?"dark":"light";return localStorage.setItem("blaze_theme_mode",t),document.documentElement.classList.toggle("dark",t==="dark"),{...e,mode:t}})},setPrimaryColor:e=>{r(t=>{const o={...t,primaryColor:e};return localStorage.setItem("blaze_theme_primary_color",e),document.documentElement.style.setProperty("--color-primary",e),o})},setFontFamily:e=>{r(t=>{const o={...t,fontFamily:e};return localStorage.setItem("blaze_theme_font_family",e),document.documentElement.style.setProperty("--font-family",e),o})},setFontSize:e=>{r(t=>{const o={...t,fontSize:e};return localStorage.setItem("blaze_theme_font_size",e.toString()),document.documentElement.style.setProperty("--font-size-base",`${e}px`),o})},setBorderRadius:e=>{r(t=>{const o={...t,borderRadius:e};return localStorage.setItem("blaze_theme_border_radius",e.toString()),document.documentElement.style.setProperty("--border-radius",`${e}px`),o})},setPreference:(e,t)=>{r(o=>{const m={...o.preferences,[e]:t};return localStorage.setItem("blaze_theme_preferences",JSON.stringify(m)),{...o,preferences:m}})},loadPreferences:()=>{const e=localStorage.getItem("blaze_theme_mode");e&&document.documentElement.classList.toggle("dark",e==="dark");const t=localStorage.getItem("blaze_theme_primary_color");t&&document.documentElement.style.setProperty("--color-primary",t);const o=localStorage.getItem("blaze_theme_font_family");o&&document.documentElement.style.setProperty("--font-family",o);const m=localStorage.getItem("blaze_theme_font_size");m&&document.documentElement.style.setProperty("--font-size-base",`${m}px`);const n=localStorage.getItem("blaze_theme_border_radius");n&&document.documentElement.style.setProperty("--border-radius",`${n}px`);const c=localStorage.getItem("blaze_theme_preferences");let s={};if(c)try{s=JSON.parse(c)}catch(u){console.error("Failed to load theme preferences",u)}r(u=>({mode:e||"light",primaryColor:t||"#DC2626",fontFamily:o||"system-ui",fontSize:parseInt(m)||16,borderRadius:parseInt(n)||8,preferences:s}))},reset:()=>{localStorage.removeItem("blaze_theme_mode"),localStorage.removeItem("blaze_theme_primary_color"),localStorage.removeItem("blaze_theme_font_family"),localStorage.removeItem("blaze_theme_font_size"),localStorage.removeItem("blaze_theme_border_radius"),localStorage.removeItem("blaze_theme_preferences"),document.documentElement.classList.remove("dark"),document.documentElement.style.removeProperty("--color-primary"),document.documentElement.style.removeProperty("--font-family"),document.documentElement.style.removeProperty("--font-size-base"),document.documentElement.style.removeProperty("--border-radius"),l({mode:"light",primaryColor:"#DC2626",fontFamily:"system-ui",fontSize:16,borderRadius:8,preferences:{}})}}}const f=p();typeof window<"u"&&(localStorage.getItem("blaze_theme_mode")||window.matchMedia("(prefers-color-scheme: dark)").matches&&f.setMode("dark"),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",l=>{localStorage.getItem("blaze_theme_mode")||f.setMode(l.matches?"dark":"light")}));
